import{j as r,L as w,r as u}from"./app-CWw-a1tk.js";import{L as v}from"./label-DuO8iQ0C.js";import{I as x}from"./input-B3wL4Wl2.js";import{c as C}from"./button-uC_BeCuX.js";import{b as F,F as N}from"./field-combobox-CT4ZBcBP.js";import{a as y}from"./sidebar_cita-DZVecSTe.js";import{I as k}from"./input-error-D4A83_zx.js";const T=({label:e,required:t,htmlFor:a,children:s})=>{if(!e)return r.jsx(r.Fragment,{children:s});if(s?.props?.type==="hidden")return s;const n=s?.type?.displayName==="FieldCombobox";return r.jsxs("div",{className:"group relative w-full",children:[r.jsxs(v,{htmlFor:n?void 0:a,className:"bg-background text-foreground absolute top-0 left-2 -translate-y-1/2 px-1 text-xs z-10 flex items-center gap-1",children:[e,t&&r.jsx("span",{className:"text-destructive text-xs",children:"*"})]}),s]})},$=({id:e,type:t,value:a,disabled:s,placeholder:n,maxlength:l,setData:c})=>r.jsx(x,{id:e,type:t||"text",value:a??"",onChange:p=>c(e.replace("field-",""),p.target.value),disabled:s,maxLength:l,placeholder:n||" ",className:"w-full"});function _({className:e,...t}){return r.jsx("textarea",{"data-slot":"textarea",className:C("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-80 md:text-sm",e),...t})}const E=({id:e,value:t,disabled:a,placeholder:s,rows:n=3,setData:l})=>r.jsx(_,{id:e,value:t??"",onChange:c=>l(e.replace("field-",""),c.target.value),rows:n,disabled:a,placeholder:s||" ",className:"w-full min-h-24"}),L=({field:e})=>r.jsx(w,{href:e.url||"#",className:`inline-block px-4 py-2 rounded text-white text-center ${e.color==="blue"?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 hover:bg-gray-700"}`,target:"_blank",rel:"noopener noreferrer",children:e.label}),I=({id:e,value:t,setData:a,disabled:s,view:n})=>{const[l,c]=u.useState(null);u.useEffect(()=>{if(e.replace("field-","").toLowerCase().includes("imagen")&&typeof t=="string"&&t){const d=t.startsWith("http")?t:`${window.location.origin}/images/${n}/${t}`;c(d)}},[t,e,n]);const p=m=>{const d=m.target.files?.[0];if(!d)return;a(e.replace("field-",""),d);const i=new FileReader;i.onload=()=>c(i.result),i.readAsDataURL(d)};return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(x,{type:"file",id:e,onChange:p,disabled:s,accept:"image/*"}),l&&r.jsx("img",{src:l,alt:"Preview",className:"h-32 w-32 object-cover rounded-md border"})]})},M=({id:e,value:t,onChange:a,placeholder:s="Seleccionar hora",disabled:n=!1})=>{const l=u.useRef(null),c=u.useMemo(()=>t??"",[t]),p=u.useCallback(()=>{n||l.current?.showPicker?.()},[n]),m=u.useCallback(d=>{a?.(d.target.value)},[a]);return r.jsxs("div",{className:"relative w-full cursor-pointer",onClick:p,children:[r.jsx(x,{ref:l,id:e,type:"time",value:c,onChange:m,placeholder:s,disabled:n,className:`pr-9 focus:border-blue-500 focus:ring-1 focus:ring-blue-500\r
          [appearance:textfield]\r
          [&::-webkit-calendar-picker-indicator]:opacity-0\r
          [&::-webkit-clear-button]:hidden\r
          [&::-webkit-inner-spin-button]:hidden\r
          [&::-webkit-time-picker-indicator]:hidden`}),r.jsx(y,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})},P=({id:e,value:t,setData:a,disabled:s})=>r.jsx(M,{id:e,value:t,disabled:s,onChange:n=>a(e.replace("field-",""),n)}),g=(e=0)=>{e=parseInt(e,10)||0;const t=Math.floor(e/12),a=e%12;return t===0&&a===0?"0 meses":t===0?`${a} meses`:a===0?`${t} año${t>1?"s":""}`:`${t} año${t>1?"s":""}, ${a} meses`},R=(e,t)=>{const a=(s,n)=>{e(s,n),s==="edad"&&e("edad_extendida",g(n))};return u.useEffect(()=>{t.edad!=null&&!t.edad_extendida&&e("edad_extendida",g(t.edad))},[t.edad]),a},A={button:L,textarea:E,select:N,date:F,time:P,file:I},z=({formFields:e,data:t,setData:a,errors:s,readonly:n,isMobile:l,view:c})=>{if(!e)return null;const p=R(a,t),m=u.useMemo(()=>Object.entries(e).map(([i,o])=>({key:i,field:o.form??o})),[e]),d=i=>l?"100%":i.width?`${i.width*120}px`:"200px";return r.jsx(r.Fragment,{children:m.map(({key:i,field:o})=>{if(o.hidden)return null;const f=`field-${i}`,b=A[o.type]??$,j=t[i]??o.value??o.default??"";return r.jsxs("div",{className:"flex flex-col space-y-1.5",style:{width:d(o)},children:[r.jsx(T,{label:o.label,required:o.required,htmlFor:f,children:r.jsx(b,{id:f,value:j,disabled:n||o.disabled||o.readonly,setData:p,field:{...o,key:i},view:c,placeholder:o.placeholder,rows:o.rows,type:o.type,maxlength:o.maxlength})}),r.jsx(k,{message:s[i]})]},i)})})},h={historia_clinica:"Historia clínica",mascota:"Mascotas",medicamento:"Medicamentos",usuario:"Usuarios",cita:"Citas",cliente:"Dueños"},Y=e=>h[e]?h[e]:e.replace(/_/g," ").toUpperCase();export{z as F,Y as g};
