import{j as r,L as w,r as u}from"./app-B04X6OkL.js";import{L as j}from"./label-DPOfUSIQ.js";import{I as m}from"./input-m9l7sJMx.js";import{c as v}from"./button-BVnaOFZA.js";import{b as C,F}from"./field-combobox-CtWywbHC.js";import{C as N}from"./sidebar_cita-BvS1rcB5.js";import{I as y}from"./input-error-DNLFe0J7.js";const k=({label:e,required:t,htmlFor:a,children:s})=>{if(!e)return r.jsx(r.Fragment,{children:s});if(s?.props?.type==="hidden")return s;const n=s?.type?.displayName==="FieldCombobox";return r.jsxs("div",{className:"group relative w-full",children:[r.jsxs(j,{htmlFor:n?void 0:a,className:"bg-background text-foreground absolute top-0 left-2 -translate-y-1/2 px-1 text-xs z-10 flex items-center gap-1",children:[e,t&&r.jsx("span",{className:"text-destructive text-xs",children:"*"})]}),s]})},$=({id:e,type:t,value:a,disabled:s,placeholder:n,maxlength:i,setData:c})=>r.jsx(m,{id:e,type:t||"text",value:a??"",onChange:p=>c(e.replace("field-",""),p.target.value),disabled:s,maxLength:i,placeholder:n||" ",className:"w-full"});function E({className:e,...t}){return r.jsx("textarea",{"data-slot":"textarea",className:v("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-80 md:text-sm",e),...t})}const L=({id:e,value:t,disabled:a,placeholder:s,rows:n=3,setData:i})=>r.jsx(E,{id:e,value:t??"",onChange:c=>i(e.replace("field-",""),c.target.value),rows:n,disabled:a,placeholder:s||" ",className:"w-full min-h-24"}),T=({field:e})=>r.jsx(w,{href:e.url||"#",className:`inline-block px-4 py-2 rounded text-white text-center ${e.color==="blue"?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 hover:bg-gray-700"}`,target:"_blank",rel:"noopener noreferrer",children:e.label}),_=({id:e,value:t,setData:a,disabled:s,view:n})=>{const[i,c]=u.useState(null);u.useEffect(()=>{if(e.replace("field-","").toLowerCase().includes("imagen")&&typeof t=="string"&&t){const d=t.startsWith("http")?t:`${window.location.origin}/images/${n}/${t}`;c(d)}},[t,e,n]);const p=x=>{const d=x.target.files?.[0];if(!d)return;a(e.replace("field-",""),d);const l=new FileReader;l.onload=()=>c(l.result),l.readAsDataURL(d)};return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(m,{type:"file",id:e,onChange:p,disabled:s,accept:"image/*"}),i&&r.jsx("img",{src:i,alt:"Preview",className:"h-32 w-32 object-cover rounded-md border"})]})},I=({id:e,value:t,onChange:a,placeholder:s="Seleccionar hora",disabled:n=!1})=>{const i=u.useRef(null),c=u.useMemo(()=>t??"",[t]),p=u.useCallback(()=>{n||i.current?.showPicker?.()},[n]),x=u.useCallback(d=>{a?.(d.target.value)},[a]);return r.jsxs("div",{className:"relative w-full cursor-pointer",onClick:p,children:[r.jsx(m,{ref:i,id:e,type:"time",value:c,onChange:x,placeholder:s,disabled:n,className:`pr-9 focus:border-blue-500 focus:ring-1 focus:ring-blue-500\r
          [appearance:textfield]\r
          [&::-webkit-calendar-picker-indicator]:opacity-0\r
          [&::-webkit-clear-button]:hidden\r
          [&::-webkit-inner-spin-button]:hidden\r
          [&::-webkit-time-picker-indicator]:hidden`}),r.jsx(N,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})},P=({id:e,value:t,setData:a,disabled:s})=>r.jsx(I,{id:e,value:t,disabled:s,onChange:n=>a(e.replace("field-",""),n)}),g=(e=0)=>{e=parseInt(e,10)||0;const t=Math.floor(e/12),a=e%12;return t===0&&a===0?"0 meses":t===0?`${a} meses`:a===0?`${t} año${t>1?"s":""}`:`${t} año${t>1?"s":""}, ${a} meses`},R=(e,t)=>{const a=(s,n)=>{e(s,n),s==="edad"&&e("edad_extendida",g(n))};return u.useEffect(()=>{t.edad!=null&&!t.edad_extendida&&e("edad_extendida",g(t.edad))},[t.edad]),a},M={button:T,textarea:L,select:F,date:C,time:P,file:_},Y=({formFields:e,data:t,setData:a,errors:s,readonly:n,isMobile:i,view:c})=>{if(!e)return null;const p=R(a,t),x=u.useMemo(()=>Object.entries(e).map(([l,o])=>({key:l,field:o.form??o})),[e]),d=l=>i?"100%":l.width?`${l.width*120}px`:"200px";return r.jsx(r.Fragment,{children:x.map(({key:l,field:o})=>{if(o.hidden)return null;const f=`field-${l}`,b=M[o.type]??$,h=t[l]??o.value??o.default??"";return r.jsxs("div",{className:"flex flex-col space-y-1.5",style:{width:d(o)},children:[r.jsx(k,{label:o.label,required:o.required,htmlFor:f,children:r.jsx(b,{id:f,value:h,disabled:n||o.disabled||o.readonly,setData:p,field:{...o,key:l},view:c,placeholder:o.placeholder,rows:o.rows,type:o.type,maxlength:o.maxlength})}),r.jsx(y,{message:s[l]})]},l)})})};export{Y as F};
