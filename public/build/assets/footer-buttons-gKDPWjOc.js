import{r as k,c as y,j as t}from"./app-CKSBN-dA.js";import{B as A}from"./button-BVKw-Uua.js";import{B as R}from"./field-combobox-B-i2tj8r.js";import{z as B}from"./transition-JNKJwOGY.js";import{L as I}from"./loader-circle-DZcxQVvU.js";import{S as $,T as P}from"./trash-2-Dc2hh4Dn.js";import{C as v}from"./sidebar_cita-BNVlNDS-.js";const D={create:{m:"POST",t:"Registrar",c:"bg-blue-500 hover:bg-blue-600",d:"Ingresa los datos cuidadosamente.",p:"REGISTRO DE",r:!1},update:{m:"PATCH",t:"Actualizar",c:"bg-green-600 hover:bg-green-500",d:"Actualiza los datos con cuidado.",p:"ACTUALIZAR",r:!1},delete:{m:"DELETE",t:"Eliminar",c:"bg-red-500 hover:bg-red-700 destructive",d:"¿Estás seguro que deseas eliminar? Esta acción es irreversible.",p:"ELIMINAR",r:!0},info:{m:"POST",t:"",c:"bg-gray-500 hover:bg-gray-600",d:"Consulta la información.",p:"INFORMACIÓN DE",r:!0}},L={create:"border-blue-300 dark:border-blue-950",update:"border-green-300 dark:border-green-900",delete:"border-red-300 dark:border-red-900",info:"border-gray-300 dark:border-gray-700"},w=(e,o)=>e?.id??e?.[`id_${o}`],z=e=>typeof e=="string"?`?tipo=${e}`:e?`?${new URLSearchParams(Object.entries(e).map(([o,a])=>[o,String(a)]))}`:"",J=(e,o,a,r,c,i,n,d,l,x,p,E,h)=>k.useMemo(()=>{const b=e||"create",s=D[b],j=w(a,r),T=`${s.p}`,C=z(x),F=Object.values(p??{}).some(f=>f instanceof File),N=f=>{f.preventDefault();const g=s.m==="POST"?route(`${r}.store`):route(`${r}.update`,{[r]:j});if(F){const m=new FormData,S=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!S)return;m.append("_token",S),s.m!=="POST"&&m.append("_method",s.m),Object.entries(p).forEach(([O,u])=>{u!=null&&m.append(O,u instanceof File?u:String(u))}),y.post(g,m,{forceFormData:!0,preserveScroll:!0,onSuccess:h})}else s.m==="POST"?c(g):s.m==="PATCH"?i(g):n(route(`${r}.destroy`,{[r]:j}))};return{title:T,description:s.d,readonly:!!s.r,cardBorderClass:L[b],handleSubmit:N,config:s,type:b,queryString:C,recentlySuccessful:l,processing:d}},[e,o,a,r,c,i,n,d,l,x,p,E,h]),K=({view:e,queryString:o,config:a,type:r,handleSubmit:c,recentlySuccessful:i,processing:n})=>{const d=n?t.jsx(I,{className:"w-4 h-4 animate-spin"}):r==="create"?t.jsx($,{className:"w-4 h-4"}):r==="update"?t.jsx(v,{className:"w-4 h-4"}):t.jsx(P,{className:"w-4 h-4"}),l=()=>a.t?t.jsxs(A,{size:"sm",type:"submit",disabled:n,className:`${a.c} flex items-center gap-2 text-white`,onClick:c,children:[d,a.t]}):null;return t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsx(R,{label:"Regresar"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(B,{show:i,enter:"transition",enterFrom:"opacity-0",leave:"transition",leaveTo:"opacity-0",children:t.jsx("p",{className:`text-sm ${r==="delete"?"text-red-600":"text-neutral-600"} dark:text-neutral-400`,children:"Guardado"})}),t.jsx(l,{})]})]})};export{K as F,J as u};
